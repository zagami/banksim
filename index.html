<!DOCTYPE html>
<html>
<head>
 <!--JS Libraries -->
  <!-- jQuery -->
  <script src="lib/jquery-2.1.4.js"></script>

  <!-- Knockout.js -->
  <script src="lib/knockout-min.js"></script>
  <script src="lib/knockout.mapping.min.js"></script>

  <!-- highcharts -->
  <script src="lib/highcharts.js"></script>
  <script src="lib/exporting.js"></script>

  <!-- vis -->
  <script src="lib/vis.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/vis.css">

  <script src="lib/hashtable.js"></script>

  <!-- stylesheet -->
  <link rel="stylesheet" type="text/css" href="css/style.css">
 
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- application -->
  <script src="src/microeconomy.js"></script>
  <script src="src/banksim.js"></script>
  
  <title>BankSim</title>
</head>

<body>

<h1>BankSim</h1>

<div id="left">

<div id="controls">

  <a href=":blank" data-bind="click: lang_de_clicked">DE</a>
  <a href=":blank" data-bind="click: lang_en_clicked">EN</a>
  <input type="text" data-bind="value: step"/>
</div>

<div id="params">
</div>
</div>

<div id="viz">
  <div id="graphs">
    <div id="cb_chart"></div> 
    <div id="banks_total_chart"></div> 
    <div id="customers_total_chart"></div> 
    <div id="stats_chart1"></div>
    <div id="stats_chart2"></div>
    <div id="taxes_chart"></div>
    <div id="wealth_chart"></div>
    <div id="banks_chart"></div>
    <div id="banks_chart2"></div>
    <div id="banks_chart3"></div>
    <div id="interest_graph" class='graph'></div>
  </div>

  <div id="tables">
    <div id="cb_table"></div>
    <div id="ms_table"></div>
    <div id="state_table"></div>
    <div id="customers_table"></div>
    <div id="banks_table"></div>
  </div>
</div>

<script type="text/javascript" src="lib/shortcut.js"></script>

<script>
<!--http://stackoverflow.com/questions/5061353/how-to-create-a-keyboard-shortcut-for-an-input-button-->
    shortcut.add("n", function() {
        // Do something
        simulator.simulate_clicked();
    }); 
    shortcut.add("r", function() {
        // Do something
        simulator.reset_clicked();
    });  
    shortcut.add("a", function() {
        // Do something
        simulator.autorun_clicked();
    });  
</script>

<div id="foo" style= "clear: both">
</div>

<div id="instructions_english">
<pre>

# Money Simulator

## Shortcuts

* You can press **n** to simulate one step
* You can press **r** to reset the simulation
* You can press **a** to toggle Autorun mode

## Assuptions of the simulation

- There is 1 central bank
- There is a fixed number of banks
- All money is book money, there is no cash for simplicity
- Customers have only 1 bank account
- The simulation runs year by year. For every year, the following steps will be performed:
  * for every transaction type a random number of transactions is performed

### PAYMENTS, ECONOMIC ACTIVITY BETWEEN NONBANKS
    - the amount of each payment is random 
    - 2 random banks are randomly chosen for each transaction
    - its upper limit is the amount of bank deposits
    - there is no withdrawal limit except bank deposit
    - if a bank has not enough reserves to make the transaction it can take a loan from the central bank (prime rate) or from the target bank (libor rate), depending on which rate is lower. Interbank loans are preferred if rates are equal.

### CUSTOMER DEPOSITS AND LOANS

  - the interest rates for deposits and loans are fixed for every bank, there is no market yet
  - overdrafts: a negative deposit is not possible, this  would be equivalent to a loan
  - customers are assigned a equal loan at the start
    * the loans are not yet secured by collaterals
    * customers don't have to be elligible for a loan

  - customers can pay back their loans every year:
    * customers only pay back their loans with their savings if savings rate is below interest rate for loans.
    * the payback amount is up to the customer, there are no restrictions
  - customers are saving their money on a savings account, according to a savings rate.

### INTERBANK LOANS
  - the libor rate is fixed for every bank, there is no market yet
  - there is no upper limit for interbank loans 
  - interbank loans are payed back randomly, if reserves allow it
  - interbank loans are not swapped to central bank loans if libor rate is higher than prime rate

### CENTRAL BANK DEPOSITS AND LOANS
  - the prime rates are the main parameters of the simulation
  - interest rates can vary each year
  - the loans are not yet secured by collaterals of the banks
  - the banks decide when and how much to payback loans to central banks
  - the central bank will provide as many loans as requested by banks

### BANKRUPCY OF CUSTOMER
  - since the loans are not secured, a customer can always extend their loans by the remaining interest debt (compound interest)

### BANKRUPCY OF BANK
  - a bank cannot get bankrupt, there are no minimal reserves requirements yet, nor capital requirements 

### STATE
  - the state has a bank account at the central bank
  - the state can tax the nonbanks by income or wealth
  - the state cannot tax banks yet
  - the state can provide a basic income to its citizens

Customers will be subdivided into Persons and Corporations soon.

Transactions in () are not implemented yet

Customer - Customer
  * payment
    - innerbank transfer 
    - interbank transfer 
      -> triggers interbank settlement
  * (new private loan) 
  * (pay interest for private loan) 
  * (payback private loan)

Bank -> Customer
  * pay deposit interest
  * new loan
   
Customer -> Bank
  * loan interest (-> can trigger new customer loan, paying interest with new debt)
  * payback loan

Bank -> Bank
  * interbank payment settlement (can trigger new ib or cb loan)
  * new interbank loan
  * pay interbank interest (can trigger new ib or cb loan)
  * payback interbank loan

Central Bank -> Bank
  * pay interest for giro deposit
  * new central bank credit

Bank -> Central Bank
  * pay interest for central bank credit
  * payback central bank credit


# Formulas

VOC:
personal loans: private Darlehen 
corporate bonds: Obligation?
overdraft: if account "overdrawn"
to default: pleite gehen

In finance, a loan is a debt provided by an entity (organization or individual) to another entity at an interest rate, and evidenced by a note which specifies, among other things, the principal amount, interest rate, and date of repayment. A loan entails the reallocation of the subject asset(s) for a period of time, between the lender and the borrower.

The borrower is obligated to pay back or repay an equal amount of money to the lender at a later time.

A secured loan is a loan in which the borrower pledges some asset (e.g. a car or property) as collateral.
</pre>
</div>
<div id="instructions_german">
 Dies ist die deutsche Uebersetzung 
- Keine Kontoführungsgebühren
- Kein Wertschriftengeschaeft (Investmentbanking?)
- Liquiditätsanforderungen
</div>
</body>
</html>
